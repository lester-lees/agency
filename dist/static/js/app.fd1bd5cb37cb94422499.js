webpackJsonp([1],{"+skl":function(t,e){},"44mk":function(t,e){},"9Dnt":function(t,e){},"AT+4":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),s={name:"myheader",methods:{onMenuSelect:function(t){console.log(t," is clicked!"),"login"===t?this.$router.push("/login"):"routes"===t&&this.$router.push("/routes")}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Menu",{attrs:{mode:"horizontal",theme:t.theme1,"active-name":"1"},on:{"on-select":t.onMenuSelect}},[n("MenuItem",{attrs:{name:"routes"}},[n("Icon",{attrs:{type:"ios-paper"}}),t._v("\n        线路查询\n    ")],1),t._v(" "),n("MenuItem",{attrs:{name:"2"}},[n("Icon",{attrs:{type:"ios-people"}}),t._v("\n        代理购票\n    ")],1),t._v(" "),n("Submenu",{attrs:{name:"report"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-stats"}}),t._v("\n            报表分析\n        ")],1),t._v(" "),n("MenuItem",{attrs:{name:"report-1"}},[t._v("订单明细")]),t._v(" "),n("MenuItem",{attrs:{name:"report--2"}},[t._v("销售报表")]),t._v(" "),n("MenuItem",{attrs:{name:"report--3"}},[t._v("佣金返还")])],2),t._v(" "),n("MenuItem",{attrs:{name:"login"}},[n("Icon",{attrs:{type:"ios-construct"}}),t._v("\n        用户登录\n        "),n("router-link",{attrs:{to:"/login"}},[t._v("用户登录")])],1)],1)},staticRenderFns:[]};var a=n("VU/8")(s,o,!1,function(t){n("prrv")},"data-v-4daa8b98",null).exports,i={name:"App",components:{myheader:a}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("myheader"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var c=n("VU/8")(i,u,!1,function(t){n("AT+4")},null,null).exports,l=n("/ocq"),_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var p=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Jimmy"}}},_,!1,function(t){n("44mk")},"data-v-2591b0c2",null).exports,d={name:"ShowRoutes",data:function(){return{routes:null,current_route:null}},mounted:function(){var t=this;this.$http.post("/agency/api/search_line/",{first:1,second:2}).then(function(e){t.routes=e.data.result.cities})},watch:{current_route:function(t,e){console.info(t);var n=this.routes.filter(function(e){return e.line_code===t});n=n&&n[0]||null,this.$emit("route_change",n)}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"show_routes"},[n("Select",{staticStyle:{width:"630px"},attrs:{id:"route",size:"large",filterable:"",placeholder:"请选择路线"},model:{value:t.current_route,callback:function(e){t.current_route=e},expression:"current_route"}},t._l(t.routes,function(e){return n("Option",{key:e.line_code,attrs:{value:e.line_code}},[t._v("\n              "+t._s(e.on_station_name)+" => "+t._s(e.off_station_name)+"\n          ")])}),1)],1)},staticRenderFns:[]};var v={name:"routelines",data:function(){return{title:"深港通跨境-代理售票",tickets:1,departure_date:(new Date).toLocaleDateString(),current_route:"",current_bus:"",bus:[],price:0,total_price:0}},methods:{route_change:function(t){console.info("route_change")},onclick_busno:function(t){},onchange_route:function(t){var e=this,n=this.departure_date.toLocaleDateString(),r="/agency/api/search_bus_info/"+t.line_code;this.$http.post(r,{line_code:t.line_code,off_station_code:t.off_station_code,on_station_code:t.on_station_code,departure_date:n,vehicle_type:t.vehicle_type,route_type:t.route_type}).then(function(t){e.bus=t.data.result.bus})},submit:function(){this.$http.post("/agency/api/create_order_info/",{org_no:"FIX"}).then(function(t){})}},watch:{tickets:function(t,e){var n=this,r=this.bus.filter(function(t){return t.busNo===n.current_bus});r=r&&r[0],this.total_price=this.tickets*r.price},current_bus:function(t,e){var n=this.bus.filter(function(e){return e.busNo===t});n=n&&n[0],this.total_price=this.tickets*n.price}},components:{"show-route":n("VU/8")(d,m,!1,function(t){n("uMwk")},"data-v-26d002b6",null).exports}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main_content layout"},[n("h1",[t._v(t._s(t.title))]),t._v(" "),n("Layout",[n("div",{staticClass:"content"},[t._v("\n          选择路线 ：\n          "),n("show-route",{on:{route_change:t.onchange_route}}),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("p",[t._v("您选择的线路： "+t._s(t.current_route))]),t._v(" "),n("p",[t._v("您选择的班次： "+t._s(t.current_bus))]),t._v(" "),n("br"),n("br"),t._v("\n          选择发车时间：\n          "),n("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.departure_date,callback:function(e){t.departure_date=e},expression:"departure_date"}}),t._v(" "),t.bus.length>0?n("Divider"):t._e(),t._v(" "),t.bus.length>0?n("div",{staticClass:"showbus"},[n("RadioGroup",{attrs:{vertical:""},model:{value:t.current_bus,callback:function(e){t.current_bus=e},expression:"current_bus"}},t._l(t.bus,function(e){return n("Radio",{key:e.busNo,staticClass:"bus_line",attrs:{size:"large",label:e.busNo}},[n("Icon",{attrs:{type:"social-windows"}}),t._v(" "),n("span",[t._v("班次："+t._s(e.busNo)+", 发车时间："+t._s(e.departureTime)+"， 车辆类型："+t._s(e.vehicle_type)+", 剩余票数："+t._s(e.surplusTicket)+" 张, 价格："+t._s(e.price)+"元")])],1)}),1)],1):t._e(),t._v(" "),n("Divider"),t._v(" "),n("div",{staticStyle:{"margin-bottom":"10px",width:"630px"},attrs:{id:"tickets_number"}},[t._v("\n              购票数量： "),n("Input",{staticStyle:{width:"120px"},attrs:{type:"number"},model:{value:t.tickets,callback:function(e){t.tickets=e},expression:"tickets"}})],1),t._v(" "),n("div",{staticStyle:{"margin-bottom":"10px",width:"630px"},attrs:{id:"tickets_price"}},[t._v("\n              总价    ： "),n("Input",{staticStyle:{width:"120px"},attrs:{type:"number",readonly:""},model:{value:t.total_price,callback:function(e){t.total_price=e},expression:"total_price"}})],1),t._v(" "),n("Button",{staticClass:"submit",attrs:{type:"btn primary",shape:"circle"},on:{click:t.submit}},[t._v("购买")])],1)])],1)},staticRenderFns:[]};var f=n("VU/8")(v,h,!1,function(t){n("jjQa")},"data-v-1e95309d",null).exports,b=n("Dd8w"),g=n.n(b),y={name:"LoginForm",props:{userNameRules:{type:Array,default:function(){return[{required:!0,message:"账号不能为空",trigger:"blur"}]}},passwordRules:{type:Array,default:function(){return[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},data:function(){return{form:{userName:"admin",password:""}}},computed:{rules:function(){return{userName:this.userNameRules,password:this.passwordRules}}},methods:{handleSubmit:function(){var t=this;this.$refs.loginForm.validate(function(e){e&&t.$emit("on-success-valid",{userName:t.form.userName,password:t.form.password})})}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Form",{ref:"loginForm",attrs:{model:t.form,rules:t.rules},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(e)}}},[n("FormItem",{attrs:{prop:"userName"}},[n("Input",{attrs:{placeholder:"请输入用户名"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("Icon",{attrs:{size:16,type:"ios-person"}})],1)])],1),t._v(" "),n("FormItem",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary",long:""},on:{click:t.handleSubmit}},[t._v("登录")])],1)],1)},staticRenderFns:[]};var w=n("VU/8")(y,k,!1,function(t){n("XWhP")},null,null).exports,x=n("NYxO"),I={components:{LoginForm:w},methods:g()({},Object(x.b)(["handleLogin","getUserInfo"]),{handleSubmit:function(t){var e=this,n=t.userName,r=t.password;this.handleLogin({userName:n,password:r}).then(function(t){e.getUserInfo().then(function(t){e.$router.push({name:e.$config.homeName})})})}})},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login"},[e("div",{staticClass:"login-con"},[e("Card",{attrs:{icon:"log-in",title:"欢迎登录深港通-代理售票后台",bordered:!0}},[e("div",{staticClass:"form-con"},[e("login-form",{on:{"on-success-valid":this.handleSubmit}}),this._v(" "),e("p",{staticClass:"login-tip"},[this._v("输入正确的用户名和密码")])],1)])],1)])},staticRenderFns:[]};var N=n("VU/8")(I,$,!1,function(t){n("9Dnt"),n("SPnQ")},null,null).exports;r.default.use(l.a);var S=new l.a({routes:[{path:"/report",name:"report",component:p},{path:"/routes",name:"roues",component:f},{path:"/login",name:"login",meta:{title:"Login - 登录",hideInMenu:!0},component:N}],mode:"history"}),F=n("mtWM"),C=n.n(F),j=n("BTaQ"),R=n.n(j);n("+skl");C.a.defaults.baseURL="http://192.168.0.187:8069",r.default.prototype.$http=C.a,r.default.use(R.a),r.default.use(x.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:S,components:{App:c,Header:a},template:"<App/>"})},SPnQ:function(t,e){},XWhP:function(t,e){},jjQa:function(t,e){},prrv:function(t,e){},uMwk:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fd1bd5cb37cb94422499.js.map